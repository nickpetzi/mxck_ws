<launch>

  	
  <arg name="run_camera" default="false" />
  <arg name="run_vesc" default="false"/> <!--manual control-->
  <arg name="run_lidar" default="false" /> 
  <arg name="run_micro" default="false" /> <!--microcontroller: us, lights, imu, rc-->
  <arg name="run_pdc" default="false" /> <!--pdc visualization-->
  <arg name="run_imu" default="false" /> <!--calibrate and filter imu data-->
  <arg name="run_foxglove" default="false" /> <!--stream data using foxglove-->


   <!--ports-->
  <arg name="joy_port" value="/dev/input/js0" />
  <arg name="vesc_port" value="/dev/vesc" />
  <arg name="stm_port" value="/dev/stm32_nucleo" />
  <arg name="stm_baud" value="921600" />
  

  <!--camera-->
  <group if="$(arg run_camera)">
    <include file="$(find realsense2_camera)/launch/rs_camera.launch" >
      <arg name="color_width" value="320"/> <!--static params-->
      <arg name="color_height" value="180"/>
      <arg name="color_fps" value="6"/>
      <arg name="enable_confidence" value="False"/>
      <arg name="enable_depth" value="False"/>
    </include>
  </group>


  <!--lidar-->
  <group if="$(arg run_lidar)">
    <include file="$(find rplidar_ros)/launch/rplidar.launch" />
  </group>


  <!--vesc-->
  <group if="$(arg run_vesc)">
    <include file="$(find vesc_driver)/launch/vesc_driver_node.launch" >
      <arg name="port" value="$(arg vesc_port)" />
    </include>
  </group>


  <!--microcontroller-->
  <group if="$(arg run_micro)">
    <include file="$(find mxck_run)/launch/nucleo_run.launch"  >
      <arg name="port" value="$(arg stm_port)" />
      <arg name="baud" value="$(arg stm_baud)" />
    </include>
  </group>


  <!--pdc visualization-->
  <group if="$(arg run_pdc)">
    <include file="$(find pdc_visualization)/launch/pdc_visualization.launch" />
  </group>


  <!--imu-->
  <group if="$(arg run_imu)">
    <node pkg="imu_control" name="imu_calibrate" type="imu_calibrate.py" output="screen"/>
  </group>
  
  
  <!--foxglove-->
  <group if="$(arg run_foxglove)">
    <include file="$(find foxglove_bridge)/launch/foxglove_bridge.launch">
      <arg name="port" value="8765" />
    </include>
  </group>


</launch>


